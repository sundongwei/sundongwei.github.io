<!-- {% include base_path %}

<section class="page__share">
  {% if site.data.ui-text[site.locale].share_on_label %}
    <h4 class="page__share-title">{{ site.data.ui-text[site.locale].share_on_label | default: "Share on" }}</h4>
  {% endif %}

  <a href="https://x.com/intent/post?text={{ base_path }}{{ page.url }}" class="btn btn--x" title="{{ site.data.ui-text[site.locale].share_on_label | default: 'Share on' }} X"><i class="fab fa-x-twitter" aria-hidden="true"></i><span> X (formerly Twitter)</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u={{ base_path }}{{ page.url }}" class="btn btn--facebook" title="{{ site.data.ui-text[site.locale].share_on_label | default: 'Share on' }} Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ base_path }}{{ page.url }}" class="btn btn--linkedin" title="{{ site.data.ui-text[site.locale].share_on_label | default: 'Share on' }} LinkedIn"><i class="fab fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section> -->
{% include base_path %}

<section class="page__share">
  {% if site.data.ui-text[site.locale].share_on_label %}
    <h4 class="page__share-title">{{ site.data.ui-text[site.locale].share_on_label | default: "Share on" }}</h4>
  {% endif %}

  <!-- WeChat Share with QR Code -->
  <a href="javascript:void(0);" class="btn btn--wechat" 
     title="{{ site.data.ui-text[site.locale].share_on_label | default: 'Share on' }} WeChat"
     onclick="handleWechatShare('{{ base_path }}{{ page.url }}')">
    <i class="fab fa-weixin" aria-hidden="true"></i><span> WeChat</span>
  </a>

  <!-- Weibo Share with Title -->
  <a href="https://service.weibo.com/share/share.php?url={{ base_path }}{{ page.url }}&title={{ page.title | uri_escape }}" 
     class="btn btn--weibo" 
     title="{{ site.data.ui-text[site.locale].share_on_label | default: 'Share on' }} Weibo"
     target="_blank"
     rel="noopener noreferrer">
    <i class="fab fa-weibo" aria-hidden="true"></i><span> Weibo</span>
  </a>

  <!-- X Platform (formerly Twitter) -->
  <a href="https://x.com/intent/post?text={{ base_path }}{{ page.url }}&via={{ site.x.username | default: site.url }}" 
     class="btn btn--x" 
     title="{{ site.data.ui-text[site.locale].share_on_label | default: 'Share on' }} X"
     target="_blank"
     rel="noopener noreferrer">
    <i class="fab fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>
</section>

<!-- QR Code Modal Template -->
<div id="qrModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close">&times;</span>
    <p>Scan QR Code to share via WeChat</p>
    <img id="qrImage" src="" alt="WeChat Share QR Code">
  </div>
</div>

<script>
// WeChat Share Handler
function handleWechatShare(url) {
  const modal = document.getElementById('qrModal');
  const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(url)}`;
  
  // Set QR code image source
  document.getElementById('qrImage').src = qrUrl;
  
  // Display modal
  modal.style.display = 'block';

  // Close handlers
  document.querySelector('.close').onclick = () => modal.style.display = 'none';
  window.onclick = (event) => {
    if (event.target === modal) modal.style.display = 'none';
  }
}
</script>

<style>
/* Modal Styling */
.modal {
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.4);
}

.modal-content {
  background-color: #fefefe;
  margin: 15% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
  max-width: 300px;
  text-align: center;
  position: relative;
}

.close {
  color: #aaa;
  position: absolute;
  right: 15px;
  top: 5px;
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
}
</style>